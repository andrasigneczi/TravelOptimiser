<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>
        Price statistic
    </title>
    <script src="/js/highcharts/jquery-1.12.0/jquery.min.js"></script>
    <script src="/js/highcharts/highcharts-4.2.3.js"></script>
    <script src="/js/highcharts/exporting-4.2.3.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/bootstrap/bootstrap.min.js"></script>

    <link rel="stylesheet" type="text/css" href="/css/traveloptimizer.css" title="Style">
</head>
<body>
<div class="TO_row">
    <label>Select departure airport: </label>
    [DEPARTURE_AIRPORTS]
</div>

<div class="TO_row">
[AVAILABLE_TRIPS]
</div>

[CHART_DIVS]

<script lang="JavaScript">
    [CHART_SCRIPTS]
</script>

<form action="/ajaxrequest" id="ajaxform" method="POST">
    <input type="hidden" name="pushedbutton" id="pushedbutton" value=""/>
</form>

<!-- the result of the search will be rendered inside this div -->
<div id="ajaxresult"></div>

<script>
    // Attach a submit handler to the form
    $( "#ajaxform" ).submit(function( event ) {

    // Stop form from submitting normally
    event.preventDefault();

    // Get some values from elements on the page:
    var $form = $( this )
    var lPb = document.getElementById( "pushedbutton" );
    var lWidget = document.getElementById( lPb.value );

    var lParam = null;
    if( lPb.value == 'DepartureAirportList' )
    {
        lParam = lWidget.options[lWidget.selectedIndex].value;
    }
    lURL = $form.attr( "action" );

    // Send the data using post
    var posting = $.post( lURL, { id: lPb.value, param: lParam } );

    // Put the results in a div
    posting.done(function( data ) {
        alert( data );
    });
});

</script>
</body>
</html>